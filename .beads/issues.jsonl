{"id":"unpaperwallet_org-145","title":"Copy CNAME to dist during build","description":"## Issue\nCNAME file in root is not copied to dist/ during build, which will break custom domain on GitHub Pages deployment.\n\n## Solution\nUpdate build.js to copy CNAME from root to dist/\n\n## Files\n- build.js (add CNAME copy logic)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T17:13:31.925106504+01:00","updated_at":"2025-12-07T17:32:14.547796303+01:00","closed_at":"2025-12-07T17:32:14.547796303+01:00"}
{"id":"unpaperwallet_org-1ge","title":"Task: Add Esplora API integration and validation","description":"## Objective\nAdd API fetching logic to retrieve UTXOs from Blockstream Esplora API with proper validation and error handling.\n\n## File to Modify\n`utils.js` (add new functions)\n\n## Functions to Add\n\n### 1. fetchUTXOs(address, isTestnet)\n```javascript\n/**\n * Fetch UTXOs for a Bitcoin address from Blockstream Esplora API\n * @param {string} address - Bitcoin address\n * @param {boolean} isTestnet - Use testnet API\n * @returns {Promise\u003cArray\u003e} Array of UTXO objects\n */\nasync function fetchUTXOs(address, isTestnet = false) {\n  // Validate address format first using existing validateBitcoinAddress()\n  try {\n    validateBitcoinAddress(address);\n  } catch (error) {\n    throw new Error(\\`Invalid address: \\${error.message}\\`);\n  }\n\n  const network = isTestnet ? 'testnet' : 'api';\n  const url = \\`https://blockstream.info/\\${network}/address/\\${address}/utxo\\`;\n\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { 'Accept': 'application/json' },\n      signal: AbortSignal.timeout(10000) // 10 second timeout\n    });\n\n    if (!response.ok) {\n      if (response.status === 404) {\n        throw new Error('Address not found or has no UTXOs');\n      }\n      throw new Error(\\`API error: \\${response.status} \\${response.statusText}\\`);\n    }\n\n    const data = await response.json();\n    \n    // Validate response is array\n    if (!Array.isArray(data)) {\n      throw new Error('Invalid API response format');\n    }\n\n    // Validate each UTXO\n    data.forEach((utxo, index) =\u003e {\n      if (!utxo.txid || typeof utxo.txid !== 'string' || utxo.txid.length !== 64) {\n        throw new Error(\\`Invalid txid at index \\${index}\\`);\n      }\n      if (typeof utxo.vout !== 'number' || utxo.vout \u003c 0) {\n        throw new Error(\\`Invalid vout at index \\${index}\\`);\n      }\n      if (typeof utxo.value !== 'number' || utxo.value \u003c= 0) {\n        throw new Error(\\`Invalid value at index \\${index}\\`);\n      }\n      if (!utxo.status || typeof utxo.status !== 'object') {\n        throw new Error(\\`Invalid status at index \\${index}\\`);\n      }\n    });\n\n    return data;\n  } catch (error) {\n    if (error.name === 'AbortError') {\n      throw new Error('Request timeout - API took too long to respond');\n    }\n    throw error;\n  }\n}\n```\n\n### 2. formatSatoshis(sats)\n```javascript\n/**\n * Format satoshis with thousands separators\n */\nfunction formatSatoshis(sats) {\n  return sats.toLocaleString('en-US');\n}\n```\n\n### 3. shortenTxid(txid)\n```javascript\n/**\n * Shorten txid for display (first 8...last 8 chars)\n */\nfunction shortenTxid(txid) {\n  return \\`\\${txid.substring(0, 8)}...\\${txid.substring(56)}\\`;\n}\n```\n\n## Testing Checklist\n- [ ] Valid mainnet address returns UTXOs\n- [ ] Valid testnet address returns UTXOs (with testMode=true)\n- [ ] Invalid address format throws error\n- [ ] Address with no UTXOs returns empty array or throws appropriate error\n- [ ] Network timeout handled gracefully\n- [ ] Malformed API response caught and throws error\n- [ ] Each UTXO field validated (txid, vout, value, status)\n\n## Acceptance Criteria\n- [ ] fetchUTXOs() function works for mainnet and testnet\n- [ ] All API responses validated before returning\n- [ ] Error messages are user-friendly\n- [ ] Timeout set to prevent hanging requests\n- [ ] Helper functions (formatSatoshis, shortenTxid) work correctly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T15:55:15.114963365+01:00","updated_at":"2025-12-07T17:54:47.202603505+01:00","closed_at":"2025-12-07T17:54:47.202603505+01:00","dependencies":[{"issue_id":"unpaperwallet_org-1ge","depends_on_id":"unpaperwallet_org-n8n","type":"blocks","created_at":"2025-12-07T15:57:15.203499535+01:00","created_by":"daemon"}]}
{"id":"unpaperwallet_org-1uk","title":"Task: Update file paths in index.html","description":"## Objective\nUpdate all CSS and JS file references in index.html to match new src/ structure\n\n## Path Updates Required\n\n### CSS\n- `styles.css` â†’ `css/styles.css`\n\n### Vendor Scripts\n- `bitcoinjs-lib.min.js` â†’ `vendor/bitcoinjs-lib.min.js`\n- `qrcode.min.js` â†’ `vendor/qrcode.min.js`\n- `qr-scanner-wrapper.js` â†’ `js/qr-scanner-wrapper.js`\n\n### App Scripts\n- `utils.js` â†’ `js/utils.js`\n- `bitcoin-transaction.js` â†’ `js/bitcoin-transaction.js`\n- `ui-manager.js` â†’ `js/ui-manager.js`\n\n## Acceptance Criteria\n- [ ] All \u003clink\u003e and \u003cscript\u003e tags updated\n- [ ] Paths are relative from src/index.html perspective\n- [ ] File validates (no syntax errors)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:01.959800936+01:00","updated_at":"2025-12-07T17:08:56.10934627+01:00","closed_at":"2025-12-07T17:08:56.10934627+01:00"}
{"id":"unpaperwallet_org-20j","title":"Task: Update package.json with build scripts","description":"## Objective\nAdd build and deployment scripts to package.json\n\n## Scripts to Add/Update\n\n```json\n{\n  \"scripts\": {\n    \"build\": \"node build.js\",\n    \"clean\": \"rm -rf dist\",\n    \"dev\": \"npm run build \u0026\u0026 cd dist \u0026\u0026 python3 -m http.server 8000\",\n    \"prebuild\": \"npm run clean\"\n  }\n}\n```\n\n## Script Purposes\n- `build`: Run production build (src â†’ dist)\n- `clean`: Remove dist directory\n- `dev`: Build and serve locally for testing\n- `prebuild`: Auto-cleanup before builds (npm hook)\n\n## Acceptance Criteria\n- [ ] All scripts added to package.json\n- [ ] Scripts use correct commands\n- [ ] package.json is valid JSON\n- [ ] `npm run build` works","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:49.485573266+01:00","updated_at":"2025-12-07T17:29:36.392461605+01:00","closed_at":"2025-12-07T17:29:36.392461605+01:00"}
{"id":"unpaperwallet_org-2gr","title":"Task: Configure GitHub Pages and test deployment","description":"## Objective\nConfigure GitHub repository for gh-pages deployment and verify workflow\n\n## GitHub Repository Setup\n\n### 1. Repository Settings\n- Navigate to Settings â†’ Pages\n- Source: Deploy from a branch\n- Branch: `gh-pages` (will be created by Actions)\n- Folder: / (root)\n\n### 2. Permissions Check\n- Settings â†’ Actions â†’ General â†’ Workflow permissions\n- Ensure \"Read and write permissions\" enabled\n- Allow GitHub Actions to create gh-pages branch\n\n### 3. First Deployment\n- Push changes to main branch\n- Monitor Actions tab for workflow run\n- Verify workflow completes successfully\n- Check gh-pages branch created\n\n### 4. Verify Deployment\n- Wait for Pages deployment (Settings â†’ Pages shows URL)\n- Visit GitHub Pages URL\n- Test application functionality\n- Check browser console for errors\n- Verify all assets load correctly\n\n### 5. Test Deployment Pipeline\n- Make a small change to src/\n- Commit and push to main\n- Verify Actions workflow triggers\n- Verify gh-pages updates\n- Verify live site updates\n\n## Acceptance Criteria\n- [ ] GitHub Pages configured for gh-pages branch\n- [ ] Workflow runs successfully on push\n- [ ] gh-pages branch created and updated\n- [ ] Application accessible at GitHub Pages URL\n- [ ] All features work on deployed site\n- [ ] Subsequent pushes trigger redeployment","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:49:17.948083767+01:00","updated_at":"2025-12-07T17:52:27.631372933+01:00","closed_at":"2025-12-07T17:52:27.631372933+01:00"}
{"id":"unpaperwallet_org-2v8","title":"Configure GitHub Pages to use Actions deployment source","description":"## Objective\nConfigure repository settings for GitHub Pages deployment via Actions\n\n## Steps\n1. Go to repository Settings â†’ Pages\n2. Under \"Build and deployment\" â†’ Source\n3. Select \"GitHub Actions\" (not \"Deploy from a branch\")\n\n## Why Needed\nThe deploy.yml workflow uses actions/deploy-pages@v4 which requires GitHub Pages to be configured with \"GitHub Actions\" as the source, not the legacy gh-pages branch method.\n\n## Verification\nAfter configuration, pushing to main should trigger the workflow and deploy to Pages.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T17:31:12.203995667+01:00","updated_at":"2025-12-07T17:52:27.633743207+01:00","closed_at":"2025-12-07T17:52:27.633743207+01:00"}
{"id":"unpaperwallet_org-3u5","title":"Task: Create src directory structure","description":"## Objective\nCreate organized source directory structure for the project\n\n## Directory Structure\n```\nsrc/\nâ”œâ”€â”€ index.html\nâ”œâ”€â”€ css/\nâ”œâ”€â”€ js/\nâ””â”€â”€ vendor/\n```\n\n## Steps\n1. Create `src/` directory in project root\n2. Create subdirectories: `css/`, `js/`, `vendor/`\n3. Verify directory structure is correct\n\n## Acceptance Criteria\n- [ ] `src/` directory exists\n- [ ] All subdirectories created\n- [ ] No files moved yet (just structure)","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:47:09.443628444+01:00","updated_at":"2025-12-07T17:07:37.131821481+01:00","closed_at":"2025-12-07T17:07:37.131821481+01:00"}
{"id":"unpaperwallet_org-4qt","title":"Show mock data toggle only when test mode is enabled","description":"## Objective\nHide the mock data mode toggle from normal users and only show it when test mode is enabled, since mock mode is primarily for development/testing.\n\n## Current Behavior\nBoth toggles are always visible:\n- Test Mode toggle (always visible)\n- Mock Data Mode toggle (always visible)\n\n## Desired Behavior\n- Test Mode toggle: Always visible\n- Mock Data Mode toggle: Only visible when Test Mode is ON\n\n## Implementation\n\n### Files to Modify\n`src/index.html` and `src/js/ui-manager.js`\n\n### HTML Changes\nAdd `hidden` class initially to mock data toggle container:\n```html\n\u003cdiv class=\"flex-container\" id=\"mock-mode-container\" style=\"display: none;\"\u003e\n    \u003clabel for=\"mock-data-mode\"\u003eMock Data Mode:\u003c/label\u003e\n    \u003c!-- ... rest of toggle ... --\u003e\n\u003c/div\u003e\n```\n\n### JavaScript Changes (ui-manager.js)\n\n1. Add DOM reference in `initializeUI()`:\n```javascript\nmockModeContainer = document.getElementById('mock-mode-container');\n```\n\n2. Update `handleTestModeToggle()`:\n```javascript\nfunction handleTestModeToggle() {\n    testMode = testModeToggle.checked;\n    \n    // Show/hide mock mode toggle based on test mode\n    if (mockModeContainer) {\n        mockModeContainer.style.display = testMode ? 'flex' : 'none';\n        \n        // Reset mock mode when hiding\n        if (!testMode \u0026\u0026 mockDataMode) {\n            mockDataModeToggle.checked = false;\n            mockDataMode = false;\n        }\n    }\n    \n    updateConnectionStatus();\n    updateFormState();\n}\n```\n\n## Testing Checklist\n- [ ] Mock mode toggle hidden by default\n- [ ] Enabling test mode shows mock mode toggle\n- [ ] Disabling test mode hides mock mode toggle\n- [ ] Mock mode auto-disabled when test mode disabled\n- [ ] No visual glitches during show/hide transition\n\n## Acceptance Criteria\n- [ ] Mock mode toggle only visible when test mode enabled\n- [ ] Mock mode automatically disabled when test mode disabled\n- [ ] Smooth UI transition when showing/hiding toggle\n- [ ] No breaking changes to existing functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T18:27:58.464898483+01:00","updated_at":"2025-12-07T18:31:57.62488795+01:00","closed_at":"2025-12-07T18:31:57.62488795+01:00"}
{"id":"unpaperwallet_org-7ag","title":"Task: Create UTXO test fixtures and mock data","description":"## Objective\nCreate comprehensive test data fixtures for UTXO fetching feature to enable testing without API calls or manual intervention.\n\n## File to Create\n`test-data/utxo-fixtures.js`\n\n## Fixtures Required\n\n### 1. Mock API Responses\nCreate `mockUtxoResponses` object with:\n- **singleUtxo**: One UTXO (typical paper wallet)\n- **multipleUtxos**: 3 UTXOs (multiple deposits scenario)\n- **unconfirmedUtxo**: 1 unconfirmed UTXO\n- **noUtxos**: Empty array (address with no funds)\n- **manyUtxos**: 15+ UTXOs (stress test)\n- **testnetUtxo**: Testnet example\n\nEach response includes:\n- address (example)\n- data array with {txid, vout, status, value}\n\n### 2. Test Addresses\nReal addresses for integration testing (public addresses only):\n- Mainnet examples (genesis address, known donation addresses)\n- Testnet examples (faucet addresses)\n- Links to testnet faucets: https://bitcoinfaucet.uo1.net/, https://testnet.help/en/btcfaucet/testnet\n\n### 3. Error Scenarios\n- Invalid address formats\n- Empty strings\n- Mock API error responses (404, 500, timeout)\n\n### 4. Validation Test Cases\n- List of valid addresses (P2PKH, P2SH, Bech32, Testnet)\n- List of invalid addresses\n\n## Helper Functions\n- `generateMockUtxos(count)` - Generate N mock UTXOs with random values\n\n## Export Format\n- ES6 module exports for use in tests\n- Browser global fallback (window.mockUtxoResponses) for dev console testing\n\n## Testing Checklist\n- [ ] All mock responses have valid structure\n- [ ] Mock data includes confirmed and unconfirmed UTXOs\n- [ ] Error scenarios cover all failure cases\n- [ ] Test addresses are publicly documented\n- [ ] File loads without errors in browser\n\n## Acceptance Criteria\n- [ ] Comprehensive mock data for all scenarios\n- [ ] Real testnet addresses documented with faucet links\n- [ ] Can be imported or loaded in browser console\n- [ ] Includes at least 6 different test scenarios","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:02:52.659525773+01:00","updated_at":"2025-12-07T16:36:48.888880047+01:00","closed_at":"2025-12-07T16:36:48.888880047+01:00","dependencies":[{"issue_id":"unpaperwallet_org-7ag","depends_on_id":"unpaperwallet_org-n8n","type":"blocks","created_at":"2025-12-07T16:03:33.635248927+01:00","created_by":"daemon"}]}
{"id":"unpaperwallet_org-8gv","title":"Task: Create GitHub Actions deployment workflow","description":"## Objective\nCreate GitHub Actions workflow to build and deploy to gh-pages branch\n\n## Workflow File\n`.github/workflows/deploy.yml`\n\n## Workflow Requirements\n\n### Trigger\n- On push to main branch\n- Manual workflow_dispatch option\n\n### Jobs\n1. **Build Job**\n   - Checkout code\n   - Setup Node.js (latest LTS)\n   - Install dependencies (npm install)\n   - Run build script (npm run build)\n   - Upload dist/ artifact\n\n2. **Deploy Job**\n   - Download build artifact\n   - Deploy to gh-pages branch using peaceiris/actions-gh-pages@v3\n\n### Key Configuration\n- `publish_dir: ./dist`\n- `github_token: ${{ secrets.GITHUB_TOKEN }}`\n- Proper permissions for GITHUB_TOKEN\n\n## Reference\n- Action: https://github.com/peaceiris/actions-gh-pages\n- Docs: https://docs.github.com/en/actions\n\n## Acceptance Criteria\n- [ ] .github/workflows/deploy.yml created\n- [ ] Workflow syntax is valid\n- [ ] Triggers on push to main\n- [ ] Uses peaceiris/actions-gh-pages for deployment\n- [ ] Includes all necessary permissions","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:37.320713623+01:00","updated_at":"2025-12-07T17:31:25.075600939+01:00","closed_at":"2025-12-07T17:31:25.075600939+01:00"}
{"id":"unpaperwallet_org-bvi","title":"Task: Add UTXO fetcher UI elements (HTML/CSS)","description":"## Objective\nAdd HTML structure and CSS styling for the UTXO fetcher interface.\n\n## Files to Modify\n1. `index.html`\n2. `styles.css`\n\n## HTML Changes\n\n**Location**: Insert BEFORE the existing \"Transaction Form\" section (around line 48, before `\u003cdiv class=\\\"form-column\\\"\u003e`)\n\n```html\n\u003cdiv class=\\\"utxo-fetcher-section\\\"\u003e\n  \u003ch2\u003e1. Fetch UTXOs (Optional - Online Only)\u003c/h2\u003e\n  \u003cdiv class=\\\"form-info\\\"\u003e\n    \u003cstrong\u003eðŸ’¡ Tip:\u003c/strong\u003e Auto-fetch your UTXOs or manually enter them below.\n  \u003c/div\u003e\n  \n  \u003cdiv class=\\\"form-group\\\"\u003e\n    \u003clabel for=\\\"source-address\\\"\u003eBitcoin Address:\u003c/label\u003e\n    \u003cinput type=\\\"text\\\" id=\\\"source-address\\\" \n           placeholder=\\\"Enter address to fetch UTXOs (1..., 3..., or bc1...)\\\"\u003e\n  \u003c/div\u003e\n  \n  \u003cbutton type=\\\"button\\\" class=\\\"button\\\" id=\\\"fetch-utxos-btn\\\"\u003e\n    Fetch UTXOs\n  \u003c/button\u003e\n  \n  \u003cdiv id=\\\"utxo-list\\\" class=\\\"utxo-list hidden\\\"\u003e\u003c/div\u003e\n  \u003cdiv id=\\\"fetch-error\\\" class=\\\"error hidden\\\"\u003e\u003c/div\u003e\n\u003c/div\u003e\n```\n\n**Update existing section heading**:\nChange `\u003ch2\u003eTransaction Form\u003c/h2\u003e` to `\u003ch2\u003e2. Transaction Form\u003c/h2\u003e`\n\n## CSS Additions\n\nAdd to `styles.css`:\n\n```css\n/* UTXO Fetcher Section */\n.utxo-fetcher-section {\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 30px;\n  border: 2px solid #dee2e6;\n}\n\n.utxo-list {\n  margin-top: 20px;\n  background: white;\n  padding: 15px;\n  border-radius: 5px;\n}\n\n.utxo-list h3 {\n  margin-top: 0;\n  color: #2c3e50;\n  font-size: 16px;\n}\n\n.utxo-list table {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 15px 0;\n}\n\n.utxo-list th,\n.utxo-list td {\n  padding: 10px;\n  text-align: left;\n  border-bottom: 1px solid #ddd;\n}\n\n.utxo-list th {\n  background-color: #f0f0f0;\n  font-weight: bold;\n  font-size: 13px;\n  text-transform: uppercase;\n}\n\n.utxo-row {\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.utxo-row:hover {\n  background-color: #f5f5f5;\n}\n\n.utxo-row.selected {\n  background-color: #e3f2fd;\n}\n\n.txid-short {\n  font-family: monospace;\n  font-size: 12px;\n  color: #495057;\n}\n\n.status-confirmed {\n  color: #28a745;\n  font-weight: bold;\n}\n\n.status-unconfirmed {\n  color: #ffc107;\n  font-weight: bold;\n}\n\n/* Responsive adjustments */\n@media (max-width: 768px) {\n  .utxo-list table {\n    font-size: 12px;\n  }\n  \n  .utxo-list th,\n  .utxo-list td {\n    padding: 8px 5px;\n  }\n  \n  .txid-short {\n    font-size: 10px;\n  }\n}\n```\n\n## Testing Checklist\n- [ ] New section appears above Transaction Form\n- [ ] Address input and Fetch button display correctly\n- [ ] Section has light gray background (visually distinct)\n- [ ] UTXO list div is hidden by default\n- [ ] Error div is hidden by default\n- [ ] Styling matches existing design system\n- [ ] Responsive design works on mobile (test at 375px width)\n- [ ] Form heading numbering updated (1. Fetch, 2. Form)\n\n## Acceptance Criteria\n- [ ] HTML structure added in correct location\n- [ ] All element IDs match specification\n- [ ] CSS styling added and matches design\n- [ ] No visual regression to existing elements\n- [ ] Mobile responsive design works","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T15:55:54.003053404+01:00","updated_at":"2025-12-07T17:55:37.617560952+01:00","closed_at":"2025-12-07T17:55:37.617560952+01:00","dependencies":[{"issue_id":"unpaperwallet_org-bvi","depends_on_id":"unpaperwallet_org-n8n","type":"blocks","created_at":"2025-12-07T15:57:15.239742037+01:00","created_by":"daemon"}]}
{"id":"unpaperwallet_org-bwv","title":"Task: Update .gitignore for dist directory","description":"## Objective\nConfigure .gitignore to exclude build artifacts\n\n## Changes Required\n\n### Add to .gitignore\n```\n# Build output\ndist/\n```\n\n### Keep Tracked (don't add)\n- src/ (source files)\n- test-data/ (test fixtures)\n- node_modules/ (should already be ignored)\n\n## Acceptance Criteria\n- [ ] dist/ added to .gitignore\n- [ ] Existing entries preserved\n- [ ] git status shows dist/ as ignored after creation","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:29.672610882+01:00","updated_at":"2025-12-07T17:10:55.175092083+01:00","closed_at":"2025-12-07T17:10:55.175092083+01:00"}
{"id":"unpaperwallet_org-c1z","title":"Task: Add UTXO fetcher event handlers and display logic","description":"## Objective\nAdd JavaScript event handlers and UI logic to fetch and display UTXOs, integrating with existing ui-manager.js.\n\n## File to Modify\n`ui-manager.js`\n\n## Implementation Steps\n\n### 1. Add Global State\nAdd `currentUtxos = []` to store fetched UTXOs (after line 7)\n\n### 2. Add DOM Element References\nDeclare and initialize in `initializeUI()`:\n- sourceAddressInput\n- fetchUtxosBtn\n- utxoListDiv\n- fetchErrorDiv\n\n### 3. Add Event Listeners\nIn `setupEventListeners()`:\n- Wire up fetchUtxosBtn click handler\n\n### 4. Update Form State Management\nIn `updateFormState()`:\n- Enable/disable fetch button based on online status\n- Always enable source address input (for convenience)\n\n### 5. Add Handler Functions\n\n**handleFetchUtxos()**\n- Get address from input\n- Show loading state (disable button, change text to \"Fetching...\")\n- Call fetchUTXOs(address, testMode)\n- Handle empty results\n- Call displayUtxoList(utxos) on success\n- Show errors via showFetchError()\n- Restore button state in finally block\n\n**displayUtxoList(utxos)**\n- Calculate total value\n- Generate HTML table with headers: Select, TxID, Index, Amount, Status\n- For each UTXO: create row with radio button, shortened txid, vout, formatted sats, status\n- Add \"Use Selected UTXO\" button\n- Attach click handlers to rows for selection\n- Show confirmed vs unconfirmed with different styling\n\n**handleUseSelectedUtxo()**\n- Get selected radio button value\n- Get UTXO from currentUtxos array\n- Auto-fill txidInput, voutInput, amountInput\n- Call validateForm()\n- Scroll to transaction form (smooth)\n- Show success message with formatted amount\n\n**showFetchError(message)** / **hideFetchError()**\n- Show/hide fetchErrorDiv with error message\n\n## Testing Checklist\n- [ ] Fetch without address shows error\n- [ ] Valid address shows loading state then UTXO table\n- [ ] UTXO count and total calculated correctly\n- [ ] Row click selects radio and highlights row\n- [ ] Use Selected without selection shows error\n- [ ] Use Selected with selection auto-fills form\n- [ ] Auto-scroll to form works smoothly\n- [ ] Success message shows then auto-hides\n- [ ] Fetch button disabled when offline\n- [ ] TxID shortened properly with full value in title attribute\n\n## Acceptance Criteria\n- [ ] All event handlers work correctly\n- [ ] UTXO table displays and formats properly\n- [ ] Row selection UX works intuitively\n- [ ] Auto-fill populates correct form fields\n- [ ] Loading and error states handled\n- [ ] Respects online/offline security model","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T15:56:54.807150265+01:00","updated_at":"2025-12-07T17:56:54.992335047+01:00","closed_at":"2025-12-07T17:56:54.992335047+01:00","dependencies":[{"issue_id":"unpaperwallet_org-c1z","depends_on_id":"unpaperwallet_org-n8n","type":"blocks","created_at":"2025-12-07T15:57:15.259084007+01:00","created_by":"daemon"},{"issue_id":"unpaperwallet_org-c1z","depends_on_id":"unpaperwallet_org-1ge","type":"blocks","created_at":"2025-12-07T15:57:15.279054382+01:00","created_by":"daemon"},{"issue_id":"unpaperwallet_org-c1z","depends_on_id":"unpaperwallet_org-bvi","type":"blocks","created_at":"2025-12-07T15:57:15.29280895+01:00","created_by":"daemon"},{"issue_id":"unpaperwallet_org-c1z","depends_on_id":"unpaperwallet_org-7ag","type":"blocks","created_at":"2025-12-07T16:07:25.81654571+01:00","created_by":"daemon"}]}
{"id":"unpaperwallet_org-dp3","title":"Task: Create production build script","description":"## Objective\nCreate Node.js build script that copies src/ to dist/ with proper structure\n\n## Build Script Requirements (build.js)\n\n### Functionality\n1. Clean/create `dist/` directory\n2. Copy all files from `src/` to `dist/` maintaining structure\n3. Ensure all subdirectories are created\n4. Preserve file permissions (especially for .js files)\n5. Add build logging/reporting\n\n### File Copying\n- `src/**/*` â†’ `dist/**/*` (recursive, preserve structure)\n- Include: .html, .css, .js, .min.js\n- Maintain directory hierarchy\n\n### Script Features\n- Use Node.js fs module (or fs-extra if available)\n- Clear dist/ before building\n- Report files copied\n- Exit with error code on failure\n\n## Acceptance Criteria\n- [ ] build.js script created/updated\n- [ ] Running script creates dist/ directory\n- [ ] All files copied with correct structure\n- [ ] Script reports success/failure clearly\n- [ ] Works with `node build.js` command","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:10.992589465+01:00","updated_at":"2025-12-07T17:09:49.010745533+01:00","closed_at":"2025-12-07T17:09:49.010745533+01:00"}
{"id":"unpaperwallet_org-dqx","title":"Restructure project with src/dist build process and GitHub Actions deployment","description":"## Objective\nImplement production-grade project structure with:\n- Source files in `src/` directory\n- Build process copying to `dist/`\n- GitHub Actions automated deployment to gh-pages\n- Clean separation of source and deployment artifacts\n\n## Success Criteria\n- [ ] All source files organized in `src/` with proper subdirectories\n- [ ] Build script copies files from `src/` to `dist/` with correct structure\n- [ ] GitHub Actions workflow deploys on push to main\n- [ ] `dist/` excluded from git\n- [ ] Application works identically after restructure\n- [ ] GitHub Pages serves from gh-pages branch\n\n## Technical Approach\n- Use Node.js build script for file copying\n- GitHub Actions workflow with actions/checkout and peaceiris/actions-gh-pages\n- Maintain all existing functionality during migration","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T16:45:59.605076281+01:00","updated_at":"2025-12-07T17:36:53.329068836+01:00","closed_at":"2025-12-07T17:36:53.329068836+01:00"}
{"id":"unpaperwallet_org-erf","title":"Add Playwright E2E Testing Framework","description":"## User Story\n\nAs a **developer**,\nI want **Playwright end-to-end testing framework set up**,\nSo that **I can verify critical user workflows and prevent regressions**.\n\n---\n\n## Story Context\n\n**Existing System Integration:**\n- Integrates with: Static web application (HTML/CSS/JS)\n- Technology: Vanilla JavaScript, no build framework\n- Follows pattern: New testing infrastructure (no existing tests)\n- Touch points: Local dev server (http://localhost:8000), offline mode, QR scanner\n\n---\n\n## Acceptance Criteria\n\n### Functional Requirements:\n1. Playwright installed and configured for the project\n2. Basic test suite covering critical paths:\n   - Page loads successfully\n   - Offline mode enforcement works\n   - Test mode toggle functions\n3. Tests run successfully via npm script\n\n### Integration Requirements:\n4. Existing application code remains unchanged\n5. Tests work with local dev server setup\n6. Test configuration supports offline/online testing scenarios\n\n### Quality Requirements:\n7. All tests pass on initial run\n8. Documentation added for running tests\n9. CI-ready configuration (can be extended later)\n\n---\n\n## Technical Notes\n\n- **Integration Approach**: Playwright runs against local server (localhost:8000)\n- **Existing Pattern Reference**: No existing test patterns - establishing new standard\n- **Key Constraints**: \n  - Must support offline testing (security model)\n  - Static files only (no build step required)\n  - Browser-based testing (Chrome/Firefox)\n\n---\n\n## Definition of Done\n\n- [ ] Playwright installed (`npm install -D @playwright/test`)\n- [ ] `playwright.config.js` created with appropriate settings\n- [ ] Basic smoke tests written (3-5 tests minimum)\n- [ ] `npm test` script configured and working\n- [ ] Tests pass locally\n- [ ] README/docs updated with test instructions\n\n---\n\n## Risk and Compatibility\n\n**Primary Risk:** Test framework adds dev dependencies but shouldn't affect production bundle\n**Mitigation:** Keep Playwright as devDependency only, no runtime impact\n**Rollback:** Remove devDependencies and test files\n\n**Compatibility:**\n- âœ… No breaking changes to production code\n- âœ… No database changes needed\n- âœ… No UI changes\n- âœ… Performance impact: None (tests run separately)\n\n---\n\n**Estimated Effort:** Single development session (2-4 hours)\n**Type:** Brownfield Addition - Testing Infrastructure","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-07T15:36:12.432153146+01:00","updated_at":"2025-12-07T15:36:12.432153146+01:00"}
{"id":"unpaperwallet_org-n8n","title":"Feature: Auto-fetch UTXOs using Blockstream Esplora API","description":"## Overview\nAdd ability to automatically fetch UTXOs for a Bitcoin address using Blockstream's Esplora API, eliminating manual lookup on mempool.space while maintaining offline-first security model.\n\n## User Story\nAs a user with a paper wallet, I want to automatically fetch my UTXOs by entering my address, so that I don't have to manually copy transaction IDs and amounts from a block explorer.\n\n## Acceptance Criteria\n- User can enter a Bitcoin address and fetch UTXOs\n- UTXOs are displayed in a clear, selectable list\n- Selected UTXO auto-fills the transaction form\n- Manual entry still works (no breaking changes)\n- Only works when online (respects security model)\n- Supports both mainnet and testnet\n\n## API Reference\n- Mainnet: `https://blockstream.info/api/address/{address}/utxo`\n- Testnet: `https://blockstream.info/testnet/api/address/{address}/utxo`\n- Response: Array of `{txid, vout, value, status}` objects\n\n## Implementation Broken Into Tasks\nSee dependent task issues for detailed implementation specs.\n\n## Security Requirements\n- Validate all API responses\n- Never auto-fill private key\n- Keep offline-first security model\n- Maintain all existing security warnings","notes":"Session handoff: Verified all esplora-related issue dependencies. Fixed missing dependency: event handlers (c1z) now depends on test fixtures (7ag). All 5 child tasks have proper dependencies. Suggested next: Start with unpaperwallet_org-7ag (test fixtures) as it blocks multiple other tasks and can be worked independently.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-07T15:54:51.474447442+01:00","updated_at":"2025-12-07T17:58:30.097234059+01:00","closed_at":"2025-12-07T17:58:30.097234059+01:00"}
{"id":"unpaperwallet_org-p4m","title":"Task: Add mock mode for UTXO API testing","description":"## Objective\nAdd mock/demo mode to UTXO fetching that uses local fixtures instead of real API, enabling automated testing without API calls.\n\n## Files to Modify\n1. `utils.js` - Update fetchUTXOs function\n2. `index.html` - Add mock mode controls (optional)\n\n## Implementation\n\n### 1. Update fetchUTXOs() in utils.js\n\nAdd mock mode parameter and logic:\n\n```javascript\n/**\n * Fetch UTXOs - supports mock mode for testing\n * @param {string} address - Bitcoin address\n * @param {boolean} isTestnet - Use testnet API\n * @param {boolean} useMockData - Use local fixtures instead of API\n */\nasync function fetchUTXOs(address, isTestnet = false, useMockData = false) {\n  // Validate address first\n  try {\n    validateBitcoinAddress(address);\n  } catch (error) {\n    throw new Error(`Invalid address: ${error.message}`);\n  }\n\n  // Mock mode - load from fixtures\n  if (useMockData \u0026\u0026 typeof mockUtxoResponses !== 'undefined') {\n    return new Promise((resolve, reject) =\u003e {\n      setTimeout(() =\u003e {\n        // Find matching mock data by address\n        const mockData = Object.values(mockUtxoResponses)\n          .find(m =\u003e m.address === address);\n        \n        if (mockData) {\n          resolve(mockData.data);\n        } else {\n          // Use default mock response\n          resolve(mockUtxoResponses.singleUtxo.data);\n        }\n      }, 500); // Simulate network delay\n    });\n  }\n\n  // Real API call (existing code)\n  const network = isTestnet ? 'testnet' : 'api';\n  const url = `https://blockstream.info/${network}/address/${address}/utxo`;\n  // ... rest of existing code\n}\n```\n\n### 2. Add Mock Mode Toggle (Optional)\n\nAdd to `index.html` near test mode toggle:\n\n```html\n\u003cdiv class=\"flex-container\"\u003e\n  \u003clabel for=\"mock-data-mode\"\u003eMock Data Mode:\u003c/label\u003e\n  \u003clabel class=\"toggle-switch\"\u003e\n    \u003cinput type=\"checkbox\" id=\"mock-data-mode\"\u003e\n    \u003cspan class=\"slider\"\u003e\u003c/span\u003e\n  \u003c/label\u003e\n  \u003cspan class=\"warning\" style=\"margin: 0; padding: 5px 10px; font-size: 12px;\"\u003e\n    Use test fixtures instead of API (for testing)\n  \u003c/span\u003e\n\u003c/div\u003e\n```\n\n### 3. Wire Up Mock Mode in ui-manager.js\n\nAdd global state:\n```javascript\nlet mockDataMode = false;\n```\n\nAdd to initializeUI():\n```javascript\nmockDataModeToggle = document.getElementById('mock-data-mode');\n```\n\nAdd to setupEventListeners():\n```javascript\nif (mockDataModeToggle) {\n  mockDataModeToggle.addEventListener('change', handleMockModeToggle);\n}\n```\n\nAdd handler:\n```javascript\nfunction handleMockModeToggle() {\n  mockDataMode = mockDataModeToggle.checked;\n  updateConnectionStatus();\n}\n```\n\nUpdate handleFetchUtxos():\n```javascript\ncurrentUtxos = await fetchUTXOs(address, testMode, mockDataMode);\n```\n\n### 4. Load Fixtures\n\nAdd to `index.html` before closing `\u003c/body\u003e`:\n```html\n\u003cscript src=\"test-data/utxo-fixtures.js\"\u003e\u003c/script\u003e\n```\n\n## Testing Checklist\n- [ ] Mock mode toggle appears and works\n- [ ] fetchUTXOs with useMockData=true returns mock data\n- [ ] Mock data returned after ~500ms delay (simulates network)\n- [ ] Entering mock fixture address returns that specific fixture\n- [ ] Unknown address returns default mock data\n- [ ] Can test all scenarios without internet connection\n- [ ] Real API mode still works when mock mode disabled\n\n## Acceptance Criteria\n- [ ] fetchUTXOs supports mock mode parameter\n- [ ] Mock mode uses local fixtures, not API\n- [ ] Toggle UI added (optional but recommended)\n- [ ] All mock scenarios testable via UI\n- [ ] No breaking changes to real API mode","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:03:28.399225554+01:00","updated_at":"2025-12-07T17:58:29.905835237+01:00","closed_at":"2025-12-07T17:58:29.905835237+01:00","dependencies":[{"issue_id":"unpaperwallet_org-p4m","depends_on_id":"unpaperwallet_org-n8n","type":"blocks","created_at":"2025-12-07T16:03:33.666397256+01:00","created_by":"daemon"},{"issue_id":"unpaperwallet_org-p4m","depends_on_id":"unpaperwallet_org-7ag","type":"blocks","created_at":"2025-12-07T16:03:33.728898125+01:00","created_by":"daemon"},{"issue_id":"unpaperwallet_org-p4m","depends_on_id":"unpaperwallet_org-1ge","type":"blocks","created_at":"2025-12-07T16:03:33.765503343+01:00","created_by":"daemon"}]}
{"id":"unpaperwallet_org-q7r","title":"Task: Test local build process","description":"## Objective\nVerify build process works correctly locally before GitHub deployment\n\n## Test Steps\n\n### 1. Clean Build Test\n```bash\nnpm run clean\nnpm run build\n```\n- Verify dist/ created\n- Check all files present\n- Verify directory structure matches src/\n\n### 2. File Integrity Test\n- Check dist/index.html exists\n- Check all CSS files copied (dist/css/styles.css)\n- Check all JS files copied (dist/js/*.js)\n- Check all vendor files copied (dist/vendor/*.min.js)\n- Verify file contents unchanged\n\n### 3. Local Server Test with curl Verification\n```bash\n# Start server\ncd dist \u0026\u0026 python3 -m http.server 8000 \u0026\nSERVER_PID=$!\nsleep 2\n\n# Verify all resources load with HTTP 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/              # Should return 200 (index.html)\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/css/styles.css  # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/js/utils.js     # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/js/bitcoin-transaction.js  # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/js/ui-manager.js          # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/js/qr-scanner-wrapper.js  # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/vendor/bitcoinjs-lib.min.js  # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/vendor/qrcode.min.js         # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/vendor/qr-scanner.min.js     # Should return 200\ncurl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/vendor/qr-scanner-worker.min.js  # Should return 200\n\n# Verify HTML content includes correct script/css references\ncurl -s http://localhost:8000/ | grep -q 'href=\"css/styles.css\"'          # CSS reference correct\ncurl -s http://localhost:8000/ | grep -q 'src=\"vendor/bitcoinjs-lib.min.js\"'  # Vendor script correct\ncurl -s http://localhost:8000/ | grep -q 'src=\"js/utils.js\"'              # App script correct\n\n# Kill server\nkill $SERVER_PID\n```\n\n### 4. Manual Browser Verification\n- Open http://localhost:8000\n- Test wallet generation flow\n- Check console for errors (F12)\n- Verify QR scanning works\n- Test online/offline detection\n- Verify all UI elements render correctly\n\n## Acceptance Criteria\n- [ ] Build completes without errors: `npm run build` exits 0\n- [ ] Directory structure correct: `ls dist/` shows index.html, css/, js/, vendor/\n- [ ] All files copied: `find dist/ -type f | wc -l` matches expected count\n- [ ] Server starts: `cd dist \u0026\u0026 python3 -m http.server 8000` runs without error\n- [ ] Index loads: `curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/` returns 200\n- [ ] CSS loads: `curl -s -o /dev/null -w \"%{http_code}\" http://localhost:8000/css/styles.css` returns 200\n- [ ] All JS files load: curl returns 200 for all js/ files\n- [ ] All vendor files load: curl returns 200 for all vendor/ files\n- [ ] HTML has correct paths: `curl -s http://localhost:8000/ | grep 'css/styles.css'` succeeds\n- [ ] Browser test: Application works identically to before (manual verification)\n- [ ] No console errors in browser DevTools","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-07T16:48:55.874796628+01:00","updated_at":"2025-12-07T17:33:59.731788288+01:00","closed_at":"2025-12-07T17:33:59.731788288+01:00"}
{"id":"unpaperwallet_org-tuv","title":"Fix QR Scanner for Private Key Input","description":"Fix the broken QR scanner feature in ui-manager.js:175-268. Root cause: ES6 module loading issue with dynamic import (line 185). Users currently must manually type 51-52 character private keys.\n\n**References**:\n- PRD: docs/prd/index.md (full requirements \u0026 acceptance criteria)\n- Architecture: docs/architecture/the-qr-scanner-implementation-current-broken-state.md (implementation details \u0026 root causes)\n- Impact Analysis: docs/architecture/enhancement-impact-analysis-qr-scanner-fix.md\n- Implementation Checklist: docs/architecture/enhancement-implementation-checklist.md\n- Critical Files: docs/architecture/quick-reference-critical-files-for-qr-scanner-fix.md\n\n**Key Fixes Needed**:\n1. Fix module loading context in index.html\n2. Configure QrScanner.WORKER_PATH\n3. Test across Chrome/Firefox/Brave","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-07T12:53:37.908312431+01:00","updated_at":"2025-12-07T13:38:33.515580609+01:00","closed_at":"2025-12-07T13:38:33.515580609+01:00"}
